<?xml version="1.0" encoding="utf-8"?>
<odoo>

<record id="product_bundle_search_inherit" model="ir.ui.view">
    <field name="name">product.template.search</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_search_view" />
    <field name="arch" type="xml">
        <xpath expr="//search/filter[@name='services']" position="before">
            <filter string="Bundles" name="is_bundle"  domain="[('is_bundle','=',True)]"/>
        </xpath>
    </field>
</record>

<record id="product_bundle_form_view_inherit" model="ir.ui.view">
    <field name="name">product.template.bundle</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_form_view"/>
    <field name="arch" type="xml">
        <xpath expr="//div[@class='oe_title']/div[@name='options']" position="inside">
            <div class="prd_bundle">
                <field name="is_bundle"/>
                <label for="is_bundle"/>
            </div>
        </xpath>
<!--        <xpath expr="//field[@name='list_price']" position="before">-->
<!--            <field name="calculate_bundle_price" attrs= "{'invisible':[('is_bundle','=', False)]}"/>-->
<!--        </xpath>-->
<!--        <xpath expr="//field[@name='list_price']" position="replace">-->
<!--            <field name="discount"/>-->
<!--            <field name="list_price" widget='monetary' attrs= "{'readonly':[('calculate_bundle_price','=', True)]}" options="{'currency_field': 'currency_id'}"/>-->
<!--        </xpath>-->
        <xpath expr="//group[@name='group_standard_price']" position="after">
            <group>
                <field name="calculate_bundle_price" attrs= "{'invisible':[('is_bundle','=', False)]}"/>
                <field name="discount" attrs= "{'invisible':[('is_bundle','=', False)]}"/>
            </group>
        </xpath>
        <xpath expr="//field[@name='list_price']" position="replace">
            <field name="list_price" widget='monetary' attrs= "{'readonly':[('calculate_bundle_price','=', True)]}" options="{'currency_field': 'currency_id'}"/>
        </xpath>
        <xpath expr="//page[@name='inventory']" position="after">
            <page string='Bundle Products' attrs= "{'invisible':[('is_bundle','!=', True)]}" name="bundle_product">
                <field name="product_bundle_ids"/>
            </page>
        </xpath>
    </field>
</record>

<record id="product_template_inherit_form" model="ir.ui.view">
    <field name="name">product.bundle.form</field>
    <field name="model">product.template</field>
    <field name="inherit_id" ref="product.product_template_only_form_view" />
    <field name="arch" type="xml">
        <xpath expr="//notebook/page[@name='variants']" position="attributes">
            <attribute name="attrs">{'invisible':[('is_bundle','=', True)]}</attribute>
        </xpath>
    </field>
</record>

</odoo>

